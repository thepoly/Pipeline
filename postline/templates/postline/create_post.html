<!-- postline/templates/postline/create_post.html -->
{% extends "wagtailadmin/base.html" %}
{% load static wagtailadmin_tags %}
{% block content %}
    <h1>Create Instagram Post for "{{ article.title }}"</h1>
    
    <form method="post" class="w-form">
        {% csrf_token %}
        
        <div class="w-field-group">
            <label for="{{ form.add_all_paragraphs.id_for_label }}">{{ form.add_all_paragraphs.label }}</label>
            {{ form.add_all_paragraphs }}
            {% if form.add_all_paragraphs.errors %}
                <ul class="errorlist">
                    {% for error in form.add_all_paragraphs.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
            <small class="form-text text-muted">{{ form.add_all_paragraphs.help_text }}</small>
        </div>
        
        <div class="w-field-group">
            <label for="{{ form.paragraph.id_for_label }}">{{ form.paragraph.label }}</label>
            {{ form.paragraph }}
            {% if form.paragraph.errors %}
                <ul class="errorlist">
                    {% for error in form.paragraph.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
            <small class="form-text text-muted">{{ form.paragraph.help_text }}</small>
        </div>
        
        <div class="w-field-group">
            <button type="submit" class="button button-primary">Generate Images</button>
            <a href="{% url 'postline:display_articles_table' %}" class="button button-secondary">Cancel</a>
        </div>
    </form>
    
    <!-- Display Messages -->
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}
    
    <style>
        .w-field-group {
            margin-bottom: 20px;
        }
        .errorlist {
            color: red;
            list-style-type: none;
            padding: 0;
        }
        .form-text {
            font-size: 0.9em;
            color: #6c757d;
        }
    </style>
{% endblock %}